{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/From_AWS_Insight/covid19data4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import MapGL,{Marker,Popup}from'react-map-gl';import{makeStyles}from'@material-ui/core/styles';import Paper from\"@material-ui/core/Paper\";import classesWp from'./WorldMap.module.css';import*as mapboxToken from'../../MapboxID';var MAPBOX_TOKEN=mapboxToken.mapBoxID;var useStyles=makeStyles(function(theme){return{paper:{width:'100%',height:'100%',marginBottom:theme.spacing(0)}};});var WorldMap=function WorldMap(props){// const [toolTip, setToolTip] = useState({showPopup: true});\nvar classes=useStyles();var _useState=useState({latitude:28,longitude:3,zoom:0,bearing:0,pitch:0,width:'100%',height:'100vh'}),_useState2=_slicedToArray(_useState,2),viewport=_useState2[0],setViewport=_useState2[1];var _useState3=useState({showPopup:false,latitude:0,longitude:0,country:'USA',totalCases:100,totalDeaths:100,newCases:100,newDeaths:100}),_useState4=_slicedToArray(_useState3,2),popup=_useState4[0],setPopup=_useState4[1];var onMarkerClickHandler=function onMarkerClickHandler(latitude,longitude,name,totalCases,totalDeaths,newCases,newDeaths){setPopup({showPopup:true,latitude:latitude,longitude:longitude,country:name,totalCases:totalCases,totalDeaths:totalDeaths,newCases:newCases,newDeaths:newDeaths});setTimeout(function(){return setPopup({showPopup:false});},3000);};var mapMarker=props.data.filter(function(country){if(country.coordinates.latitude===null||country.coordinates.longitude===null||country.coordinates.latitude===0||country.coordinates.longitude===0){return false;// skip\n}return true;}).map(function(country){// const finalValue =  country.latest_data.confirmed === 0 ? 0 : (( Math.log(country.latest_data.confirmed) / Math.log(props.totalCasesCalculated)) * 55) + 5\n// const finalValue =  ( Math.pow(country.latest_data.confirmed, 1.001) / Math.pow(props.totalCasesCalculated, 1.001) ) * 45+5;\nvar finalValue=country.latest_data.confirmed===0?0:60-50*Math.exp(-5*country.latest_data.confirmed/props.totalCasesCalculated);var pWidth=finalValue.toString()+'px';var pHeight=finalValue.toString()+'px';return/*#__PURE__*/React.createElement(Marker,{latitude:country.coordinates.latitude,longitude:country.coordinates.longitude,offsetLeft:-20,offsetTop:-10,key:country.code,anchor:\"bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.marker,style:{backgroundColor:\"rgba(230,0,0,0.54)\",width:pWidth,height:pHeight,borderRadius:'50%'},onClick:function onClick(){return onMarkerClickHandler(country.coordinates.latitude,country.coordinates.longitude,country.name,country.latest_data.confirmed,country.latest_data.deaths,country.today.confirmed,country.today.deaths);}}));});return/*#__PURE__*/React.createElement(Paper,{className:classes.paper,elevation:0},/*#__PURE__*/React.createElement(MapGL,Object.assign({},viewport,{mapStyle:\"mapbox://styles/mapbox/light-v10\",onViewportChange:setViewport,mapboxApiAccessToken:MAPBOX_TOKEN}),mapMarker,popup.showPopup&&/*#__PURE__*/React.createElement(Popup,{latitude:popup.latitude,longitude:popup.longitude,closeButton:true,closeOnClick:true,onClose:function onClose(){return setPopup({showPopup:false});},anchor:\"bottom\",dynamicPosition:false},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:classesWp.topToolTip},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.titleInfoBox},popup.country),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statLine},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.stat,style:{color:'#DE3700'}},\"Total cases\"),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statCount},popup.totalCases)),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.divider}),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statLine},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.legendColor,style:{backgroundColor:'#F4C363'}}),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.stat},\"Total Deaths\"),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statCount},popup.totalDeaths)),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statLine},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.legendColor,style:{backgroundColor:'#60BB69'}}),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.stat},\"Cases Today\"),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statCount},popup.newCases)),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statLine},/*#__PURE__*/React.createElement(\"div\",{className:classesWp.legendColor,style:{backgroundColor:'#767676'}}),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.stat},\"Deaths Today\"),/*#__PURE__*/React.createElement(\"div\",{className:classesWp.statCount},popup.newDeaths)),/*#__PURE__*/React.createElement(\"i\",null))))));};export default WorldMap;","map":{"version":3,"sources":["/Users/mac/Documents/From_AWS_Insight/covid19data4/src/Components/WorldMap/WorldMap.js"],"names":["React","useState","MapGL","Marker","Popup","makeStyles","Paper","classesWp","mapboxToken","MAPBOX_TOKEN","mapBoxID","useStyles","theme","paper","width","height","marginBottom","spacing","WorldMap","props","classes","latitude","longitude","zoom","bearing","pitch","viewport","setViewport","showPopup","country","totalCases","totalDeaths","newCases","newDeaths","popup","setPopup","onMarkerClickHandler","name","setTimeout","mapMarker","data","filter","coordinates","map","finalValue","latest_data","confirmed","Math","exp","totalCasesCalculated","pWidth","toString","pHeight","code","marker","backgroundColor","borderRadius","deaths","today","topToolTip","titleInfoBox","statLine","stat","color","statCount","divider","legendColor"],"mappings":"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","sourcesContent":["import React, { useState} from \"react\";\nimport MapGL,{Marker, Popup} from 'react-map-gl';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from \"@material-ui/core/Paper\";\nimport classesWp from './WorldMap.module.css';\nimport * as mapboxToken from '../../MapboxID';\n\nconst MAPBOX_TOKEN = mapboxToken.mapBoxID;\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        width: '100%',\n        height: '100%',\n        marginBottom: theme.spacing(0),\n    }\n}));\n\n\n\nconst WorldMap = (props) => {\n    // const [toolTip, setToolTip] = useState({showPopup: true});\n\n    const classes = useStyles();\n    const [viewport, setViewport] = useState({\n        latitude: 28,\n        longitude: 3,\n        zoom: 0,\n        bearing: 0,\n        pitch: 0,\n        width: '100%',\n        height: '100vh',\n    });\n\n\n\n\n    const [popup, setPopup] = useState({showPopup: false, latitude: 0, longitude:0, country: 'USA', totalCases: 100, totalDeaths: 100, newCases: 100, newDeaths: 100});\n\n    const onMarkerClickHandler = (latitude, longitude,  name, totalCases, totalDeaths, newCases, newDeaths) => {\n        setPopup({showPopup: true, latitude: latitude, longitude:longitude, country: name, totalCases: totalCases, totalDeaths: totalDeaths, newCases: newCases, newDeaths: newDeaths});\n\n        setTimeout(() =>(\n            setPopup({showPopup: false})\n        ), 3000);\n\n    }\n\n    const mapMarker = props.data.filter((country)=> {\n        if ((country.coordinates.latitude === null || country.coordinates.longitude === null) || (country.coordinates.latitude === 0 || country.coordinates.longitude === 0)) {\n            return false; // skip\n        }\n        return true;\n    }).map((country) => {\n        // const finalValue =  country.latest_data.confirmed === 0 ? 0 : (( Math.log(country.latest_data.confirmed) / Math.log(props.totalCasesCalculated)) * 55) + 5\n        // const finalValue =  ( Math.pow(country.latest_data.confirmed, 1.001) / Math.pow(props.totalCasesCalculated, 1.001) ) * 45+5;\n        const finalValue =  country.latest_data.confirmed === 0 ? 0 : 60-50 * ( Math.exp(-5*(country.latest_data.confirmed) / (props.totalCasesCalculated) ) )\n\n        const pWidth = finalValue.toString() + 'px';\n        const pHeight = finalValue.toString() + 'px';\n\n        return (\n\n            <Marker latitude={country.coordinates.latitude} longitude={country.coordinates.longitude} offsetLeft={-20}\n                    offsetTop={-10} key={country.code}  anchor=\"bottom\">\n\n                <div className={classesWp.marker} style={{backgroundColor: \"rgba(230,0,0,0.54)\", width: pWidth, height: pHeight, borderRadius: '50%'}}\n                     onClick={() => onMarkerClickHandler(country.coordinates.latitude, country.coordinates.longitude, country.name,\n                          country.latest_data.confirmed, country.latest_data.deaths, country.today.confirmed, country.today.deaths)}></div>\n            </Marker>\n\n        );\n    })\n\n    return (\n        <Paper className={classes.paper} elevation={0}>\n        <MapGL\n            {...viewport}\n            mapStyle=\"mapbox://styles/mapbox/light-v10\"\n            onViewportChange={setViewport}\n            mapboxApiAccessToken={MAPBOX_TOKEN}\n        >\n\n        {mapMarker}\n            {popup.showPopup && <Popup\n                latitude={popup.latitude}\n                longitude={popup.longitude}\n                closeButton={true}\n                closeOnClick={true}\n                onClose={() => setPopup({showPopup: false})}\n                anchor=\"bottom\"\n                dynamicPosition={false}\n            >\n                <div>\n                    <div className={classesWp.topToolTip} >\n                        <div className={classesWp.titleInfoBox}>{popup.country}</div>\n                        <div className={classesWp.statLine}>\n                            <div className={classesWp.stat} style={{color: '#DE3700'}}>Total cases</div>\n                            <div className={classesWp.statCount}>{popup.totalCases}</div>\n                        </div>\n                        <div className={classesWp.divider}></div>\n                        <div className={classesWp.statLine}>\n                            <div className={classesWp.legendColor} style={{backgroundColor: '#F4C363'}}></div>\n                            <div className={classesWp.stat}>Total Deaths</div>\n                            <div className={classesWp.statCount}>{popup.totalDeaths}</div>\n                        </div>\n                        <div className={classesWp.statLine}>\n                            <div className={classesWp.legendColor} style={{backgroundColor: '#60BB69'}}></div>\n                            <div className={classesWp.stat}>Cases Today</div>\n                            <div className={classesWp.statCount}>{popup.newCases}</div>\n                        </div>\n                        <div className={classesWp.statLine}>\n                            <div className={classesWp.legendColor} style={{backgroundColor: '#767676'}}></div>\n                            <div className={classesWp.stat}>Deaths Today</div>\n                            <div className={classesWp.statCount}>{popup.newDeaths}</div>\n                        </div>\n                        <i></i>\n                    </div>\n\n                </div>\n\n            </Popup>}\n\n        </MapGL>\n        </Paper>\n    );\n};\n\n\nexport default WorldMap;"]},"metadata":{},"sourceType":"module"}